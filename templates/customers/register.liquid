<section data-section-id="reset-password" data-section-type="reset-password">
  <div class="Container">
    <div class="PageContent PageContent--fitScreen PageContent--extraNarrow">
      {%- form 'create_customer', name: 'create_customer', class: 'Form Form--spacingTight', id: 'create_customer' -%}
        <input type="hidden" name="checkout_url" value="/" />
      <header class="Form__Header">
          <h1 class="Form__Title Heading u-h1">{{ 'customer.register.title' | t }}</h1>
          <p class="Form__Legend">{{ 'customer.register.description' | t }}</p>
        </header>

        {%- if form.errors -%}
          <div class="Form__Alert Alert Alert--error">
            <ul class="Alert__ErrorList">
              {%- for field in form.errors -%}
                {%- if field == 'form' -%}
                  <li class="Alert__ErrorItem">{{ form.errors.messages[field] }}</li>
                {%- else -%}
                  <li class="Alert__ErrorItem"><strong>{{ form.errors.translated_fields[field] }}</strong> {{ form.errors.messages[field] }}</li>
                {%- endif -%}
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}

        <div class="Form__Item">
          <input type="text" class="Form__Input" name="customer[first_name]" aria-label="{{ 'customer.register.first_name' | t }}" placeholder="{{ 'customer.register.first_name' | t }}" autofocus>
          <label class="Form__FloatingLabel">{{ 'customer.register.first_name' | t }}</label>
        </div>

        <div class="Form__Item">
          <input type="text" class="Form__Input" name="customer[last_name]" aria-label="{{ 'customer.register.last_name' | t }}" placeholder="{{ 'customer.register.last_name' | t }}">
          <label class="Form__FloatingLabel">{{ 'customer.register.last_name' | t }}</label>
        </div>
      
        <div class="Form__Item">
          <input type="date" class="Form__Input" name="customer[note][birthday]" aria-label="{{ 'customer.register.birthday' | t }}" placeholder="{{ 'customer.register.birthday' | t }}">
          <label class="Form__FloatingLabel">{{ 'customer.register.birthday' | t }}</label>
        </div>

        <div class="Form__Item">
          <input type="email" id="customer_register_email" class="Form__Input" name="customer[email]" aria-label="{{ 'customer.register.email' | t }}" placeholder="{{ 'customer.register.email' | t }}" required="required">
          <label class="Form__FloatingLabel">{{ 'customer.register.email' | t }}</label>
        </div>

        <div class="Form__Item">
          <input type="password" class="Form__Input" name="customer[password]" aria-label="{{ 'customer.register.password' | t }}" placeholder="{{ 'customer.register.password' | t }}" required="required">
          <label class="Form__FloatingLabel">{{ 'customer.register.password' | t }}</label>
        </div>
      
        <div class="Form__Item">
          <select id="SourceOfTraffic" class="Form__Input" name="customer[note][Source of Traffic]" aria-label="{{ 'customer.register.source_of_traffic' | t }}" placeholder="{{ 'customer.register.source_of_traffic' | t }}">
            <option>Google Search</option>
            <option>Social Media</option>
            <option>Lazada</option>
            <option>Shopee</option>
            <option>Sephora</option>
            <option>Amazon</option>
            <option>Recommendation From Friends or Family</option>
            <option>Others</option>
          </select>
          <label for="SourceOfTraffic" class="Form__FloatingLabel">{{ 'customer.register.source_of_traffic' | t }}</label>
        </div>

        <button type="submit" class="Form__Submit Button Button--primary Button--full">{{ 'customer.register.submit' | t }}</button>
        <div class="Form__Hint Form__Hint--center">
          <span class="Text--subdued">{{ 'customer.register.have_account' | t }}</span>
          <a href="/account/login" class="Link Link--secondary">{{ 'customer.register.login' | t }}</a>
        </div>
      {%- endform -%}
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function() { 
    $(".Form__Submit").click(function() {
      var email_address = $('input#customer_register_email').val();
      var source_of_traffic = $('select#SourceOfTraffic').val();

      _learnq.push(['identify', {
        '$email' : email_address,
        'Source of Traffic' : source_of_traffic
      }]);
    });
  });
</script>